# Portworx on AWS module

Module to provision terraform-aws-portworx on a redhat rosa cluster


## Software dependencies

The module depends on the following software components:

### Terraform version

- \>= v0.15

### Terraform providers


- aws (hashicorp/aws)

### Module dependencies


- cluster - [github.com/cloud-native-toolkit/terraform-ocp-login.git](https://github.com/cloud-native-toolkit/terraform-ocp-login.git) (>= 1.2.4)

## Example usage

```hcl
module "aws-portworx" {
  source = "github.com/cloud-native-toolkit/terraform-aws-portworx"

  access_key = var.access_key
  cluster_config_file = module.cluster.config_file_path
  default_block_storage_class = var.aws-portworx_default_block_storage_class
  default_file_storage_class = var.aws-portworx_default_file_storage_class
  default_rwo_storage_class = var.aws-portworx_default_rwo_storage_class
  default_rwx_storage_class = var.aws-portworx_default_rwx_storage_class
  disk_size = var.aws-portworx_disk_size
  enable_encryption = var.aws-portworx_enable_encryption
  kvdb_disk_size = var.aws-portworx_kvdb_disk_size
  portworx_spec = var.portworx_spec
  portworx_spec_file = var.portworx_spec_file
  provision = var.aws-portworx_provision
  px_enable_csi = var.aws-portworx_px_enable_csi
  px_enable_monitoring = var.aws-portworx_px_enable_monitoring
  region = var.region
  secret_key = var.secret_key
}

```

## Module details

### Inputs

| Name | Description | Required | Default | Source |
|------|-------------|---------|----------|--------|
| provision | If set to true installs Portworx on the given cluster | false | true |  |
| access_key |  | true |  |  |
| secret_key |  | true |  |  |
| region | AWS Region the cluster is deployed in | true |  |  |
| disk_size | Disk size for each Portworx volume | false | 1000 |  |
| kvdb_disk_size |  | false | 450 |  |
| px_enable_monitoring | Enable monitoring on PX | false | true |  |
| px_enable_csi | Enable CSI on PX | false | true |  |
| cluster_config_file | Cluster config file for Kubernetes cluster. | true |  | cluster.config_file_path |
| portworx_spec |  | true |  |  |
| portworx_spec_file | The path to the file that contains the yaml spec for the Portworx config. Either the `portworx_spec_file` or `portworx_spec` must be provided. The instructions for creating this configuration can be found at https://github.com/cloud-native-toolkit/terraform-azure-portworx/blob/main/PORTWORX_CONFIG.md | true |  |  |
| enable_encryption | Flag indicating portworx volumes should be encrypted | true |  |  |
| default_rwx_storage_class | The default storage class that should be used for RWX volumes | false | portworx-rwx-gp3-sc |  |
| default_rwo_storage_class | The default storage class that should be used for RWO volumes | false | portworx-gp3-sc |  |
| default_file_storage_class | The default storage class that should be used for file volumes | false | portworx-gp3-sc |  |
| default_block_storage_class | The default storage class that should be used for block volumes | false | ibmc-vpc-block-10iops-tier |  |

### Outputs

| Name | Description |
|------|-------------|
| rwx_storage_class |  |
| rwo_storage_class |  |
| file_storage_class |  |
| block_storage_class |  |
| storage_classes_provided |  |

## Resources

- [Documentation](https://operate.cloudnativetoolkit.dev)
- [Module catalog](https://modules.cloudnativetoolkit.dev)

> License: Apache License 2.0 | Generated by iascable (3.2.2)
